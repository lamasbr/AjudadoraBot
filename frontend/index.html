<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AjudadoraBot Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p class="loading-text">Loading AjudadoraBot...</p>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <button id="back-btn" class="back-button" style="display: none;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <h1 id="page-title" class="page-title">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="bot-status" id="bot-status">
                        <span class="status-indicator"></span>
                        <span class="status-text">Offline</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-page="dashboard">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Dashboard</span>
            </button>
            <button class="nav-tab" data-page="users">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M23 21V19C23 17.1362 21.7252 15.5701 20 15.126" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 3.12598C17.7252 3.56989 19 5.13616 19 7C19 8.86384 17.7252 10.4301 16 10.874" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Users</span>
            </button>
            <button class="nav-tab" data-page="messages">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Messages</span>
            </button>
            <button class="nav-tab" data-page="settings">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                    <path d="M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.2573 9.77251 19.9857C9.5799 19.7141 9.31074 19.5046 9 19.38C8.69838 19.2469 8.36381 19.2072 8.03941 19.266C7.71502 19.3248 7.41568 19.4795 7.18 19.71L7.12 19.77C6.93425 19.956 6.71368 20.1035 6.47088 20.2041C6.22808 20.3048 5.96783 20.3566 5.705 20.3566C5.44217 20.3566 5.18192 20.3048 4.93912 20.2041C4.69632 20.1035 4.47575 19.956 4.29 19.77C4.10405 19.5843 3.95653 19.3637 3.85588 19.1209C3.75523 18.8781 3.70343 18.6178 3.70343 18.355C3.70343 18.0922 3.75523 17.8319 3.85588 17.5891C3.95653 17.3463 4.10405 17.1257 4.29 16.94L4.35 16.88C4.58054 16.6443 4.73519 16.345 4.794 16.0206C4.85282 15.6962 4.81312 15.3616 4.68 15.06C4.55324 14.7642 4.34276 14.512 4.07447 14.3343C3.80618 14.1566 3.49179 14.0613 3.17 14.06H3C2.46957 14.06 1.96086 13.8493 1.58579 13.4742C1.21071 13.0991 1 12.5904 1 12.06C1 11.5296 1.21071 11.0209 1.58579 10.6458C1.96086 10.2707 2.46957 10.06 3 10.06H3.09C3.42099 10.0523 3.742 9.94512 4.01426 9.75251C4.28653 9.5599 4.49596 9.29074 4.62 8.98C4.75312 8.67838 4.79282 8.34381 4.734 8.01941C4.67519 7.69502 4.52054 7.39568 4.29 7.16L4.23 7.1C4.04405 6.91425 3.89653 6.69368 3.79588 6.45088C3.69523 6.20808 3.64343 5.94783 3.64343 5.685C3.64343 5.42217 3.69523 5.16192 3.79588 4.91912C3.89653 4.67632 4.04405 4.45575 4.23 4.27C4.41575 4.08405 4.63632 3.93653 4.87912 3.83588C5.12192 3.73523 5.38217 3.68343 5.645 3.68343C5.90783 3.68343 6.16808 3.73523 6.41088 3.83588C6.65368 3.93653 6.87425 4.08405 7.06 4.27L7.12 4.33C7.35568 4.56054 7.65502 4.71519 7.97941 4.774C8.30381 4.83282 8.63838 4.79312 8.94 4.66C9.23576 4.53324 9.48796 4.32276 9.66569 4.05447C9.84342 3.78618 9.93866 3.47179 9.94 3.15V3C9.94 2.46957 10.1507 1.96086 10.5258 1.58579C10.9009 1.21071 11.4096 1 11.94 1C12.4704 1 12.9791 1.21071 13.3542 1.58579C13.7293 1.96086 13.94 2.46957 13.94 3V3.09C13.9413 3.41179 14.0366 3.72618 14.2143 3.99447C14.392 4.26276 14.6442 4.47324 14.94 4.6C15.2416 4.73312 15.5762 4.77282 15.9006 4.714C16.225 4.65519 16.5243 4.50054 16.76 4.27L16.82 4.21C17.0057 4.02405 17.2263 3.87653 17.4691 3.77588C17.7119 3.67523 17.9722 3.62343 18.235 3.62343C18.4978 3.62343 18.7581 3.67523 19.0009 3.77588C19.2437 3.87653 19.4643 4.02405 19.65 4.21C19.836 4.39575 19.9835 4.61632 20.0841 4.85912C20.1848 5.10192 20.2366 5.36217 20.2366 5.625C20.2366 5.88783 20.1848 6.14808 20.0841 6.39088C19.9835 6.63368 19.836 6.85425 19.65 7.04L19.59 7.1C19.3595 7.33568 19.2048 7.63502 19.146 7.95941C19.0872 8.28381 19.1269 8.61838 19.26 8.92C19.3868 9.21576 19.5972 9.46796 19.8655 9.64569C20.1338 9.82342 20.4482 9.91866 20.77 9.92H20.86C21.3904 9.92 21.8991 10.1307 22.2742 10.5058C22.6493 10.8809 22.86 11.3896 22.86 11.92C22.86 12.4504 22.6493 12.9591 22.2742 13.3342C21.8991 13.7093 21.3904 13.92 20.86 13.92H20.77C20.4482 13.9213 20.1338 14.0166 19.8655 14.1943C19.5972 14.372 19.3868 14.6242 19.26 14.92V14.92C19.1269 15.2216 19.0872 15.5562 19.146 15.8806C19.2048 16.205 19.3595 16.5043 19.59 16.74L19.65 16.8C19.836 16.9857 19.9835 17.2063 20.0841 17.4491C20.1848 17.6919 20.2366 17.9522 20.2366 18.215C20.2366 18.4778 20.1848 18.7381 20.0841 18.9809C19.9835 19.2237 19.836 19.4443 19.65 19.63C19.4643 19.816 19.2437 19.9635 19.0009 20.0641C18.7581 20.1648 18.4978 20.2166 18.235 20.2166C17.9722 20.2166 17.7119 20.1648 17.4691 20.0641C17.2263 19.9635 17.0057 19.816 16.82 19.63L16.76 19.57C16.5243 19.3395 16.225 19.1848 15.9006 19.126C15.5762 19.0672 15.2416 19.1069 14.94 19.24C14.6442 19.3668 14.392 19.5772 14.2143 19.8455C14.0366 20.1138 13.9413 20.4282 13.94 20.75V20.84C13.94 21.3704 13.7293 21.8791 13.3542 22.2542C12.9791 22.6293 12.4704 22.84 11.94 22.84C11.4096 22.84 10.9009 22.6293 10.5258 22.2542C10.1507 21.8791 9.94 21.3704 9.94 20.84V20.75C9.93866 20.4282 9.84342 20.1138 9.66569 19.8455C9.48796 19.5772 9.23576 19.3668 8.94 19.24C8.63838 19.1069 8.30381 19.0672 7.97941 19.126C7.65502 19.1848 7.35568 19.3395 7.12 19.57L7.06 19.63C6.87425 19.816 6.65368 19.9635 6.41088 20.0641C6.16808 20.1648 5.90783 20.2166 5.645 20.2166C5.38217 20.2166 5.12192 20.1648 4.87912 20.0641C4.63632 19.9635 4.41575 19.816 4.23 19.63C4.04405 19.4443 3.89653 19.2237 3.79588 18.9809C3.69523 18.7381 3.64343 18.4778 3.64343 18.215C3.64343 17.9522 3.69523 17.6919 3.79588 17.4491C3.89653 17.2063 4.04405 16.9857 4.23 16.8L4.29 16.74C4.52054 16.5043 4.67519 16.205 4.734 15.8806C4.79282 15.5562 4.75312 15.2216 4.62 14.92C4.49596 14.6093 4.28653 14.3401 4.01426 14.1475C3.742 13.9549 3.42099 13.8477 3.09 13.84H3C2.46957 13.84 1.96086 13.6293 1.58579 13.2542C1.21071 12.8791 1 12.3704 1 11.84C1 11.3096 1.21071 10.8009 1.58579 10.4258C1.96086 10.0507 2.46957 9.84 3 9.84H3.17C3.49179 9.83866 3.80618 9.74342 4.07447 9.56569C4.34276 9.38796 4.55324 9.13576 4.68 8.84V8.84C4.81312 8.53838 4.85282 8.20381 4.794 7.87941C4.73519 7.55502 4.58054 7.25568 4.35 7.02L4.29 6.96C4.10405 6.77425 3.95653 6.55368 3.85588 6.31088C3.75523 6.06808 3.70343 5.80783 3.70343 5.545C3.70343 5.28217 3.75523 5.02192 3.85588 4.77912C3.95653 4.53632 4.10405 4.31575 4.29 4.13C4.47575 3.94405 4.69632 3.79653 4.93912 3.69588C5.18192 3.59523 5.44217 3.54343 5.705 3.54343C5.96783 3.54343 6.22808 3.59523 6.47088 3.69588C6.71368 3.79653 6.93425 3.94405 7.12 4.13L7.18 4.19C7.41568 4.42054 7.71502 4.57519 8.03941 4.634C8.36381 4.69282 8.69838 4.65312 9 4.52C9.29574 4.39324 9.54794 4.18276 9.72567 3.91447C9.9034 3.64618 9.99864 3.33179 10 3.01V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0014 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92C19.4468 9.21576 19.6572 9.46796 19.9255 9.64569C20.1938 9.82342 20.5082 9.91866 20.83 9.92H20.92C21.4504 9.92 21.9591 10.1307 22.3342 10.5058C22.7093 10.8809 22.92 11.3896 22.92 11.92C22.92 12.4504 22.7093 12.9591 22.3342 13.3342C21.9591 13.7093 21.4504 13.92 20.92 13.92H20.83C20.5082 13.9213 20.1938 14.0166 19.9255 14.1943C19.6572 14.372 19.4468 14.6242 19.32 14.92V14.92C19.1869 15.2216 19.1472 15.5562 19.206 15.8806C19.2648 16.205 19.4195 16.5043 19.65 16.74L19.71 16.8C19.896 16.9857 20.0435 17.2063 20.1441 17.4491C20.2448 17.6919 20.2966 17.9522 20.2966 18.215C20.2966 18.4778 20.2448 18.7381 20.1441 18.9809C20.0435 19.2237 19.896 19.4443 19.71 19.63C19.5243 19.816 19.3037 19.9635 19.0609 20.0641C18.8181 20.1648 18.5578 20.2166 18.295 20.2166C18.0322 20.2166 17.7719 20.1648 17.5291 20.0641C17.2863 19.9635 17.0657 19.816 16.88 19.63L16.82 19.57C16.5843 19.3395 16.285 19.1848 15.9606 19.126C15.6362 19.0672 15.3016 19.1069 15 19.24C14.7042 19.3668 14.452 19.5772 14.2743 19.8455C14.0966 20.1138 14.0014 20.4282 14 20.75V20.84C14 21.3704 13.7893 21.8791 13.4142 22.2542C13.0391 22.6293 12.5304 22.84 12 22.84C11.4696 22.84 10.9609 22.6293 10.5858 22.2542C10.2107 21.8791 10 21.3704 10 20.84V20.75C9.99864 20.4282 9.9034 20.1138 9.72567 19.8455C9.54794 19.5772 9.29574 19.3668 9 19.24C8.69838 19.1069 8.36381 19.0672 8.03941 19.126C7.71502 19.1848 7.41568 19.3395 7.18 19.57L7.12 19.63C6.93425 19.816 6.71368 19.9635 6.47088 20.0641C6.22808 20.1648 5.96783 20.2166 5.705 20.2166C5.44217 20.2166 5.18192 20.1648 4.93912 20.0641C4.69632 19.9635 4.47575 19.816 4.29 19.63C4.10405 19.4443 3.95653 19.2237 3.79588 18.9809C3.69523 18.7381 3.64343 18.4778 3.64343 18.215C3.64343 17.9522 3.69523 17.6919 3.79588 17.4491C3.89653 17.2063 4.10405 16.9857 4.29 16.8L4.35 16.74C4.58054 16.5043 4.73519 16.205 4.794 15.8806C4.85282 15.5562 4.81312 15.2216 4.68 14.92C4.55324 14.6093 4.34276 14.3401 4.07447 14.1475C3.80618 13.9549 3.49179 13.8477 3.17 13.84H3.09C2.55957 13.84 2.05086 13.6293 1.67579 13.2542C1.30071 12.8791 1.09 12.3704 1.09 11.84C1.09 11.3096 1.30071 10.8009 1.67579 10.4258C2.05086 10.0507 2.55957 9.84 3.09 9.84H3.17C3.49179 9.83866 3.80618 9.74342 4.07447 9.56569C4.34276 9.38796 4.55324 9.13576 4.68 8.84C4.81312 8.53838 4.85282 8.20381 4.794 7.87941C4.73519 7.55502 4.58054 7.25568 4.35 7.02L4.29 6.96C4.10405 6.77425 3.95653 6.55368 3.85588 6.31088C3.75523 6.06808 3.70343 5.80783 3.70343 5.545C3.70343 5.28217 3.75523 5.02192 3.85588 4.77912C3.95653 4.53632 4.10405 4.31575 4.29 4.13C4.47575 3.94405 4.69632 3.79653 4.93912 3.69588C5.18192 3.59523 5.44217 3.54343 5.705 3.54343C5.96783 3.54343 6.22808 3.59523 6.47088 3.69588C6.71368 3.79653 6.93425 3.94405 7.12 4.13L7.18 4.19C7.41568 4.42054 7.71502 4.57519 8.03941 4.634C8.36381 4.69282 8.69838 4.65312 9 4.52C9.29574 4.39324 9.54794 4.18276 9.72567 3.91447C9.9034 3.64618 9.99864 3.33179 10 3.01V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Settings</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21" stroke="currentColor" stroke-width="2"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                                <path d="M23 21V19C23 17.1362 21.7252 15.5701 20 15.126" stroke="currentColor" stroke-width="2"/>
                                <path d="M16 3.12598C17.7252 3.56989 19 5.13616 19 7C19 8.86384 17.7252 10.4301 16 10.874" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-users">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-interactions">0</div>
                            <div class="stat-label">Interactions Today</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <polyline points="22,12 18,12 15,21 9,3 6,12 2,12" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="avg-response-time">0ms</div>
                            <div class="stat-label">Avg Response Time</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <polyline points="12,6 12,12 16,14" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="uptime">0%</div>
                            <div class="stat-label">Uptime</div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>Interactions Over Time</h3>
                    <canvas id="interactions-chart" width="400" height="200"></canvas>
                </div>

                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div id="activity-list" class="activity-list">
                        <!-- Activity items will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Users Page -->
            <div id="users-page" class="page">
                <div class="page-controls">
                    <div class="search-container">
                        <input type="text" id="user-search" placeholder="Search users..." class="search-input">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <button id="refresh-users" class="action-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <polyline points="23,4 23,10 17,10" stroke="currentColor" stroke-width="2"/>
                            <polyline points="1,20 1,14 7,14" stroke="currentColor" stroke-width="2"/>
                            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10M23 14L18.36 18.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>

                <div id="users-list" class="users-list">
                    <!-- User items will be populated here -->
                </div>

                <div class="pagination" id="users-pagination">
                    <!-- Pagination will be populated here -->
                </div>
            </div>

            <!-- Messages Page -->
            <div id="messages-page" class="page">
                <div class="message-composer">
                    <h3>Send Message</h3>
                    <div class="form-group">
                        <label for="recipient-type">Send to:</label>
                        <select id="recipient-type" class="form-select">
                            <option value="all">All Users</option>
                            <option value="active">Active Users Only</option>
                            <option value="specific">Specific User</option>
                        </select>
                    </div>
                    
                    <div id="specific-user-group" class="form-group" style="display: none;">
                        <label for="specific-user">User ID:</label>
                        <input type="text" id="specific-user" placeholder="Enter user ID or username" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="message-text">Message:</label>
                        <textarea id="message-text" placeholder="Type your message here..." class="form-textarea" rows="4"></textarea>
                    </div>

                    <button id="send-message" class="primary-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <line x1="22" y1="2" x2="11" y2="13" stroke="currentColor" stroke-width="2"/>
                            <polygon points="22,2 15,22 11,13 2,9 22,2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Send Message
                    </button>
                </div>

                <div class="message-history">
                    <h3>Recent Messages</h3>
                    <div id="recent-messages" class="message-list">
                        <!-- Recent messages will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page">
                <div class="settings-section">
                    <h3>Bot Configuration</h3>
                    <div class="form-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="bot-active" class="toggle-checkbox">
                            <span class="toggle-slider"></span>
                            <span class="toggle-text">Bot Active</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="bot-mode">Bot Mode:</label>
                        <select id="bot-mode" class="form-select">
                            <option value="polling">Polling</option>
                            <option value="webhook">Webhook</option>
                        </select>
                    </div>

                    <div id="webhook-config" class="form-group" style="display: none;">
                        <label for="webhook-url">Webhook URL:</label>
                        <input type="url" id="webhook-url" placeholder="https://your-domain.com/webhook" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="bot-token">Bot Token:</label>
                        <input type="password" id="bot-token" placeholder="Enter your bot token" class="form-input">
                        <small class="form-hint">Token is securely stored and encrypted</small>
                    </div>

                    <button id="save-settings" class="primary-button">Save Settings</button>
                </div>

                <div class="settings-section">
                    <h3>About</h3>
                    <div class="about-info">
                        <p><strong>AjudadoraBot Manager</strong></p>
                        <p>Version 1.0.0</p>
                        <p>A comprehensive Telegram bot management interface</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Confirmation Dialog -->
    <div id="confirmation-dialog" class="dialog-overlay" style="display: none;">
        <div class="dialog">
            <div class="dialog-content">
                <h3 id="dialog-title"></h3>
                <p id="dialog-message"></p>
                <div class="dialog-actions">
                    <button id="dialog-cancel" class="secondary-button">Cancel</button>
                    <button id="dialog-confirm" class="primary-button">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Offline Indicator -->
    <div id="offline-indicator" class="offline-indicator">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
            <path d="M21.5 9a8.38 8.38 0 0 0-.9-3.8 8.5 8.5 0 0 0-7.6-4.7 8.38 8.38 0 0 0-3.8.9L3 5.7l4.3 4.3" stroke="currentColor" stroke-width="2"/>
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
            <path d="m8.5 8.5 7 7" stroke="currentColor" stroke-width="2"/>
            <path d="M8.5 8.5c-.7-.7-1.8-.7-2.5 0" stroke="currentColor" stroke-width="2"/>
            <path d="M8.5 8.5c.7-.7 1.8-.7 2.5 0" stroke="currentColor" stroke-width="2"/>
        </svg>
        Working offline
    </div>

    <!-- Scripts -->
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    console.log('Service Worker registered:', registration.scope);
                    
                    // Listen for service worker updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // New version available
                                if (window.showDialog) {
                                    window.showDialog(
                                        'Update Available',
                                        'A new version of the app is available. Refresh to update?',
                                        'Refresh',
                                        'Later'
                                    ).then((confirmed) => {
                                        if (confirmed) {
                                            window.location.reload();
                                        }
                                    });
                                }
                            }
                        });
                    });
                    
                } catch (error) {
                    console.error('Service Worker registration failed:', error);
                }
            });
            
            // Listen for service worker messages
            navigator.serviceWorker.addEventListener('message', (event) => {
                const { type, data } = event.data;
                
                switch (type) {
                    case 'message-synced':
                        if (window.showToast) {
                            window.showToast('Message sent successfully', 'success');
                        }
                        break;
                        
                    case 'settings-synced':
                        if (window.showToast) {
                            window.showToast('Settings synchronized', 'success');
                        }
                        break;
                }
            });
        }
        
        // Handle online/offline status
        function updateOnlineStatus() {
            const offlineIndicator = document.getElementById('offline-indicator');
            
            if (navigator.onLine) {
                offlineIndicator.classList.remove('show');
            } else {
                offlineIndicator.classList.add('show');
            }
        }
        
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        
        // Initial check
        document.addEventListener('DOMContentLoaded', updateOnlineStatus);
    </script>
    
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/users.js"></script>
    <script src="js/messages.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/app.js"></script>
</body>
</html>